# Migration `20201130110520-paragon`

This migration has been generated by Joimee Tan Cajandab at 11/30/2020, 7:05:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Inventory" (
    "id" TEXT NOT NULL,
    "referenceDate" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "dateReceived" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "quantity" INTEGER NOT NULL DEFAULT 0,
    "referenceNumber" TEXT NOT NULL,
    "partsNumber" TEXT NOT NULL,
    "particular" TEXT NOT NULL,
    "size" TEXT NOT NULL,
    "codes" TEXT NOT NULL,
    "srp" REAL,
    "description" TEXT,
    "remarks" TEXT,
    "receivedBy" TEXT,
    "checkedBy" TEXT,
    "codedBy" TEXT,
    "uomID" TEXT NOT NULL,
    "brandID" TEXT NOT NULL,
    "supplierID" TEXT NOT NULL,

    FOREIGN KEY ("uomID") REFERENCES "uom"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("brandID") REFERENCES "Brand"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("supplierID") REFERENCES "Supplier"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "Supplier" (
    "id" TEXT NOT NULL,
    "vendor" TEXT NOT NULL,
    "entry" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "initials" TEXT NOT NULL,
    "terms" INTEGER NOT NULL,
    "owner" TEXT,
    "tin" TEXT,
    "representative" TEXT,
    "address" TEXT,
    PRIMARY KEY ("id")
)

CREATE TABLE "SalesReport" (
    "id" TEXT NOT NULL,
    "dateCreated" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "name" TEXT NOT NULL,
    "tin" TEXT,
    "siNumber" TEXT,
    "arsNumber" TEXT,
    "drNumber" TEXT,
    "crsNumber" TEXT,
    "address" TEXT,
    "chequeNumber" TEXT,
    "chequeDate" DATETIME,
    "discount" REAL,
    "amount" REAL,
    "typeID" TEXT NOT NULL,
    "paymentTypeID" TEXT,
    "bankID" TEXT,

    FOREIGN KEY ("typeID") REFERENCES "SalesType"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("paymentTypeID") REFERENCES "PaymentType"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    FOREIGN KEY ("bankID") REFERENCES "Bank"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "PurchaseOrder" (
    "id" TEXT NOT NULL,
    "dateCreated" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "supplierID" TEXT,

    FOREIGN KEY ("supplierID") REFERENCES "Supplier"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "Application" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "Brand" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "supplierId" TEXT,

    FOREIGN KEY ("supplierId") REFERENCES "Supplier"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "uom" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "Code" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    "value" REAL NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "CompanyPhoneNumber" (
    "id" TEXT NOT NULL,
    "phoneNumber" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "RepresentativePhoneNumber" (
    "id" TEXT NOT NULL,
    "phoneNumber" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "Email" (
    "id" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "SalesStaff" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "PaymentType" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "Bank" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "SalesType" (
    "id" TEXT NOT NULL,
    "name" TEXT NOT NULL,
    PRIMARY KEY ("id")
)

CREATE TABLE "SoldItem" (
    "id" TEXT NOT NULL,
    "quantity" INTEGER NOT NULL,
    "itemID" TEXT,

    FOREIGN KEY ("itemID") REFERENCES "Inventory"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "POItem" (
    "id" TEXT NOT NULL,
    "quantity" INTEGER NOT NULL,
    "itemID" TEXT,

    FOREIGN KEY ("itemID") REFERENCES "Inventory"("id") ON DELETE SET NULL ON UPDATE CASCADE,
    PRIMARY KEY ("id")
)

CREATE TABLE "_ApplicationToInventory" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "Application"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "Inventory"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_CompanyPhoneNumberToSupplier" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "CompanyPhoneNumber"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "Supplier"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_RepresentativePhoneNumberToSupplier" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "RepresentativePhoneNumber"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "Supplier"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_EmailToSupplier" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "Email"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "Supplier"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_SalesReportToSalesStaff" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "SalesReport"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "SalesStaff"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_SalesReportToSoldItem" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "SalesReport"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "SoldItem"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "_POItemToPurchaseOrder" (
    "A" TEXT NOT NULL,
    "B" TEXT NOT NULL,

    FOREIGN KEY ("A") REFERENCES "POItem"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("B") REFERENCES "PurchaseOrder"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "Application.name_unique" ON "Application"("name")

CREATE UNIQUE INDEX "Brand.name_unique" ON "Brand"("name")

CREATE UNIQUE INDEX "uom.name_unique" ON "uom"("name")

CREATE UNIQUE INDEX "Code.name_unique" ON "Code"("name")

CREATE UNIQUE INDEX "SalesStaff.name_unique" ON "SalesStaff"("name")

CREATE UNIQUE INDEX "PaymentType.name_unique" ON "PaymentType"("name")

CREATE UNIQUE INDEX "Bank.name_unique" ON "Bank"("name")

CREATE UNIQUE INDEX "SalesType.name_unique" ON "SalesType"("name")

CREATE UNIQUE INDEX "_ApplicationToInventory_AB_unique" ON "_ApplicationToInventory"("A", "B")

CREATE INDEX "_ApplicationToInventory_B_index" ON "_ApplicationToInventory"("B")

CREATE UNIQUE INDEX "_CompanyPhoneNumberToSupplier_AB_unique" ON "_CompanyPhoneNumberToSupplier"("A", "B")

CREATE INDEX "_CompanyPhoneNumberToSupplier_B_index" ON "_CompanyPhoneNumberToSupplier"("B")

CREATE UNIQUE INDEX "_RepresentativePhoneNumberToSupplier_AB_unique" ON "_RepresentativePhoneNumberToSupplier"("A", "B")

CREATE INDEX "_RepresentativePhoneNumberToSupplier_B_index" ON "_RepresentativePhoneNumberToSupplier"("B")

CREATE UNIQUE INDEX "_EmailToSupplier_AB_unique" ON "_EmailToSupplier"("A", "B")

CREATE INDEX "_EmailToSupplier_B_index" ON "_EmailToSupplier"("B")

CREATE UNIQUE INDEX "_SalesReportToSalesStaff_AB_unique" ON "_SalesReportToSalesStaff"("A", "B")

CREATE INDEX "_SalesReportToSalesStaff_B_index" ON "_SalesReportToSalesStaff"("B")

CREATE UNIQUE INDEX "_SalesReportToSoldItem_AB_unique" ON "_SalesReportToSoldItem"("A", "B")

CREATE INDEX "_SalesReportToSoldItem_B_index" ON "_SalesReportToSoldItem"("B")

CREATE UNIQUE INDEX "_POItemToPurchaseOrder_AB_unique" ON "_POItemToPurchaseOrder"("A", "B")

CREATE INDEX "_POItemToPurchaseOrder_B_index" ON "_POItemToPurchaseOrder"("B")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201130110520-paragon
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,214 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+// ===========================================================================
+// Inventory
+// ===========================================================================
+model Inventory {
+  id String @id @default(uuid())
+  referenceDate DateTime @default(now())
+  dateReceived  DateTime @default(now())
+  quantity Int @default(0)
+  referenceNumber String
+  partsNumber String
+  particular String
+  size String
+  codes String
+  srp Float?
+  description String?
+  remarks String?
+  receivedBy String?
+  checkedBy String?
+  codedBy String?
+
+  // uom
+  uom uom @relation(fields: [uomID], references: [id])
+  uomID String
+
+  // brand
+  brand Brand @relation(fields: [brandID], references: [id])
+  brandID String
+
+  // supplier
+  supplier Supplier @relation(fields: [supplierID], references: [id])
+  supplierID String
+
+  // applications
+  applications Application[]
+
+  // soldItems
+  soldItems SoldItem[]
+}
+
+// ===========================================================================
+// Supplier
+// ===========================================================================
+model Supplier {
+  id String @id @default(uuid())
+  vendor String
+  entry DateTime @default(now())
+  initials String
+  terms Int
+  owner String?
+  tin String?
+  representative String?
+  address String?
+
+  // brands
+  brands Brand[]
+
+  // inventory
+  inventory Inventory[]
+
+  // phoneNumbers
+  companyPhoneNumbers CompanyPhoneNumber[]
+  representativePhoneNumbers RepresentativePhoneNumber[]
+
+  // emails
+  emails Email[]
+
+  // po
+  purchaseOrders PurchaseOrder[]
+}
+
+// ===========================================================================
+// Sales Report
+// ===========================================================================
+model SalesReport {
+  id String @id @default(uuid())
+  dateCreated DateTime @default(now())
+  name String
+  tin String?
+  siNumber String?
+  arsNumber String?
+  drNumber String?
+  crsNumber String?
+  address String?
+  chequeNumber String?
+  chequeDate DateTime?
+  discount Float?
+  amount Float?
+
+  // type
+  type SalesType @relation(fields: [typeID], references: [id])
+  typeID String
+
+  // salesStaff
+  salesStaff SalesStaff[]
+
+  // paymentType
+  paymentType PaymentType? @relation(fields: [paymentTypeID], references: [id])
+  paymentTypeID String?
+
+  // bank
+  bank Bank? @relation(fields: [bankID], references: [id])
+  bankID String?
+
+  // soldItems
+  soldItems SoldItem[]
+}
+
+// ===========================================================================
+// Purchase Order
+// ===========================================================================
+model PurchaseOrder {
+  id String @id @default(uuid())
+  dateCreated DateTime @default(now())
+  supplier Supplier? @relation(fields: [supplierID], references: [id])
+  supplierID String?
+  items POItem[]
+}
+
+// ===========================================================================
+// Helpers
+// ===========================================================================
+model Application {
+  id String @id @default(uuid())
+  name String @unique
+  inventory Inventory[]
+}
+
+model Brand {
+  id String @id @default(uuid())
+  name String @unique
+  inventory Inventory[]
+  supplier Supplier?
+}
+
+model uom {
+  id String @id @default(uuid())
+  name String @unique
+  inventory Inventory[]
+}
+
+model Code {
+  id String @id @default(uuid())
+  name String @unique
+  value Float
+}
+
+model CompanyPhoneNumber {
+  id String @id @default(uuid())
+  phoneNumber String
+  suppliers Supplier[]
+}
+
+model RepresentativePhoneNumber {
+  id String @id @default(uuid())
+  phoneNumber String
+  suppliers Supplier[]
+}
+
+model Email {
+  id String @id @default(uuid())
+  email String
+  suppliers Supplier[]
+}
+
+model SalesStaff {
+  id String @id @default(uuid())
+  name String @unique
+  salesReports SalesReport[]
+}
+
+model PaymentType {
+  id String @id @default(uuid())
+  name String @unique
+  salesReports SalesReport[]
+}
+
+model Bank {
+  id String @id @default(uuid())
+  name String @unique
+  salesReports SalesReport[]
+}
+
+model SalesType {
+  id String @id @default(uuid())
+  name String @unique
+  salesReports SalesReport[]
+}
+
+model SoldItem {
+  id String @id @default(uuid())
+  quantity Int
+  item Inventory? @relation(fields: [itemID], references: [id])
+  itemID String?
+  salesReports SalesReport[]
+}
+
+model POItem {
+  id String @id @default(uuid())
+  quantity Int
+  item Inventory? @relation(fields: [itemID], references: [id])
+  itemID String?
+  purchaseOrders PurchaseOrder[]
+}
```


